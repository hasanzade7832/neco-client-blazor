@using MudBlazor

<MudPaper Class="pa-3" Style="
    width:360px;
    min-height:170px;
    background:white;
    box-shadow:0 4px 20px 0 #0001, 0 1.5px 4px 0 #8881;
    border-radius:12px;
    display:flex;
    flex-direction:column;
    align-items:flex-end;
    position:relative;
    ">
    <!-- Legend بالا راست -->
    <div class="d-flex flex-column align-start" style="margin-bottom:6px; margin-top:2px; margin-right:2px;">
        @for (int i = 0; i < Labels.Length; i++)
        {
            <div class="d-flex flex-row align-center my-1">
                <span style="display:inline-block; width:12px; height:12px; border-radius:50%; margin-left:6px; background-color:@GetColor(i);"></span>
                <span style="font-size:12px; color:#222;">@Labels[i]</span>
            </div>
        }
    </div>

    <!-- چارت وسط افقی -->
    <div style="width:100%; display:flex; justify-content:center; align-items:center; margin-top:4px;">
        <MudChart ChartType="ChartType.Pie"
                  InputData="Data"
                  InputLabels="EmptyLabels"
                  Width="100px"
                  Height="100px" />
    </div>
</MudPaper>

@code {
    [Parameter] public double[] Data { get; set; }
    [Parameter] public string[] Labels { get; set; }

    string[] pieColors = new[]
    {
        "#2196F3", "#1DE9B6", "#FFC400", "#F44336", "#9C27B0", "#FF5722", "#607D8B", "#00B8D4", "#43A047", "#5E35B1"
    };
    string GetColor(int i) => i < pieColors.Length ? pieColors[i] : "#888";
    string[] EmptyLabels => Labels.Select(x => "").ToArray();
}
