@inherits LayoutComponentBase
@using MudBlazor

<HeadContent>
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="app.css" />
    <link rel="stylesheet" href="Dashboard.css" />
    <link rel="stylesheet" href="css/app.min.css" />
    <link rel="stylesheet" href="_content/MudBlazor/MudBlazor.min.css" />
    <style>
        html, body {
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
            background-color: var(--mud-palette-background);
            color: var(--mud-palette-text-primary);
        }

        #app, .mud-layout {
            overflow-x: hidden;
        }
    </style>
</HeadContent>

<MudThemeProvider Theme="AppThemes.KargardoonTheme" @bind-IsDarkMode="_isDarkMode" />
<MudDialogProvider />
<MudSnackbarProvider />
<MudPopoverProvider />

<MudLayout>
    <NavMenu SidebarOpen="_sidebarOpen" @bind-IsDarkMode="_isDarkMode" />
    <SideBar OnSidebarToggled="HandleSidebarToggle" IsDarkMode="_isDarkMode" />
    <MudMainContent Class="@MainContentClass">
        @Body
    </MudMainContent>
</MudLayout>

@code {
    private bool _isDarkMode = false;
    private bool _sidebarOpen = true;

    private void HandleSidebarToggle(bool isOpen)
    {
        _sidebarOpen = isOpen;
    }

    private string MainContentClass =>
        $"{(_sidebarOpen ? "ml-[250px]" : "ml-[56px]")} w-full overflow-x-hidden pt-14 px-6 py-4 transition-all duration-300";
}
