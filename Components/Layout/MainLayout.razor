@inherits LayoutComponentBase
@using MudBlazor

<HeadContent>
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="app.css" />
    <link rel="stylesheet" href="Dashboard.css" />
    <link rel="stylesheet" href="css/app.min.css" />
    <link rel="stylesheet" href="_content/MudBlazor/MudBlazor.min.css" />
    <style>
        html, body {
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
            background-color: var(--mud-palette-background);
            color: var(--mud-palette-text-primary);
        }

        #app, .mud-layout {
            overflow-x: hidden;
        }
    </style>
</HeadContent>

<MudThemeProvider Theme="AppThemes.KargardoonTheme" @bind-IsDarkMode="_isDarkMode" />
<MudDialogProvider />
<MudSnackbarProvider />
<MudPopoverProvider />

<MudLayout>
    <NavMenu SidebarOpen="_sidebarOpen" @bind-IsDarkMode="_isDarkMode" />
    <SideBar OnSidebarToggled="HandleSidebarToggle" IsDarkMode="_isDarkMode" />
    <MudMainContent Style="@MainContentStyle">
        <div style="@InnerContentStyle">
            @Body
        </div>
    </MudMainContent>
</MudLayout>

@code {
    private bool _isDarkMode = false;
    private bool _sidebarOpen = true;

    private void HandleSidebarToggle(bool isOpen)
    {
        _sidebarOpen = isOpen;
    }

    private string MainContentStyle =>
        $"padding-left:{(_sidebarOpen ? "250px" : "56px")};" +
        $"padding-right:32px;" +
        $"padding-top:64px;" +
        $"padding-bottom:24px;" +
        $"box-sizing:border-box;" +
        $"width:100%;" +
        $"min-height:100vh;" +
        $"overflow-x:hidden;" +
        $"background-color:var(--mud-palette-background);" +
        $"transition:padding-left 300ms ease;";

    private string InnerContentStyle =>
        $"max-width:1200px;" +
        $"margin:0 auto;" +
        $"width:100%;";
}
