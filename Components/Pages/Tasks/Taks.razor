@page "/tasks"
@using MudBlazor

<style>
    .task-scroll {
        scrollbar-width: thin;
        scrollbar-color: var(--mud-palette-primary,#2563EB) transparent
    }

        .task-scroll::-webkit-scrollbar {
            width: 10px
        }

        .task-scroll::-webkit-scrollbar-track {
            background: transparent
        }

        .task-scroll::-webkit-scrollbar-thumb {
            background-color: var(--mud-palette-primary,#2563EB);
            border-radius: 8px;
            border: 2px solid transparent;
            background-clip: content-box;
            box-shadow: 0 1px 2px rgba(0,0,0,.2) inset
        }

            .task-scroll::-webkit-scrollbar-thumb:hover {
                filter: brightness(.9)
            }
</style>

<div style="height:100%;display:flex;flex-direction:column;gap:8px;overflow:hidden;">
    <div class="task-scroll" style="display:flex;align-items:center;gap:16px;padding:4px 12px;overflow-x:auto;flex:0 0 auto;">
        <MudImage Src="Images/Icons/Task/Picture1.png" Alt="Picture1" Width="32" Height="32" Class="object-contain" />
        <MudImage Src="Images/Icons/Task/Picture2.png" Alt="Picture2" Width="32" Height="32" Class="object-contain" />
        <MudImage Src="Images/Icons/Task/Picture3.png" Alt="Picture3" Width="32" Height="32" Class="object-contain" />
        <MudImage Src="Images/Icons/Task/Picture4.png" Alt="Picture4" Width="32" Height="32" Class="object-contain" />
        <MudImage Src="Images/Icons/Task/Picture5.png" Alt="Picture5" Width="32" Height="32" Class="object-contain" />
        <MudImage Src="Images/Icons/Task/Picture6.png" Alt="Picture6" Width="32" Height="32" Class="object-contain" />
        <div style="width:1px;height:32px;background-color:rgba(0,0,0,.2);margin:0 8px;"></div>
        <MudImage Src="Images/Icons/Task/Picture7.png" Alt="Picture7" Width="32" Height="32" Class="object-contain" />
        <div style="display:flex;flex-direction:column;justify-content:space-between;height:26px;margin:0 8px;">
            <div style="width:4px;height:4px;border-radius:50%;background-color:rgba(0,0,0,.7);"></div>
            <div style="width:4px;height:4px;border-radius:50%;background-color:rgba(0,0,0,.7);"></div>
            <div style="width:4px;height:4px;border-radius:50%;background-color:rgba(0,0,0,.7);"></div>
        </div>
        <span style="font-size:.9rem;font-weight:500;white-space:nowrap;">View</span>
    </div>

    <div style="display:flex;align-items:stretch;gap:12px;padding:8px;box-sizing:border-box;height:calc((100vh - 140px)*2/3);overflow-x:auto;">
        <div style="@($"flex:0 0 {(ColInProgressCollapsed ? "64px" : "280px")};width:{(ColInProgressCollapsed ? "64px" : "280px")};display:flex;flex-direction:column;border-radius:12px;overflow:hidden;position:relative;background-color:rgba(245,158,11,.15);transition:width .25s ease,flex-basis .25s ease;")">
            @if (!ColInProgressCollapsed)
            {
                <div style="display:flex;justify-content:space-between;align-items:center;padding:8px 12px;">
                    <div style="font-weight:600;font-size:1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">In Progress</div>
                    <MudIconButton Icon="@Icons.Material.Filled.KeyboardDoubleArrowLeft" OnClick="ToggleInProgress" Style="color:var(--mud-palette-text-primary);font-size:22px;" />
                </div>
                <div class="task-scroll" style="flex:1;overflow-y:auto;padding:0 8px 12px;box-sizing:border-box;">
                    @foreach (var t in InProgressTasks)
                    {
                        <MudCard Elevation="1" Style="margin-bottom:8px;transition:transform .2s ease,opacity .2s ease;">
                            <div style="display:flex;justify-content:space-between;align-items:center;padding:8px 12px;">
                                <div style="display:flex;flex-direction:column;min-width:0;">
                                    <MudText Typo="Typo.subtitle2" Style="margin:0;overflow:hidden;text-overflow:ellipsis;">@t.Title</MudText>
                                    <MudText Typo="Typo.caption" Style="margin-top:4px;">@t.Date</MudText>
                                </div>
                            </div>
                        </MudCard>
                    }
                </div>
            }
            else
            {
                <div style="position:absolute;top:6px;right:6px;">
                    <MudIconButton Icon="@Icons.Material.Filled.KeyboardDoubleArrowRight" OnClick="ToggleInProgress" Style="color:var(--mud-palette-text-primary);font-size:22px;" />
                </div>
                <div style="flex:1;display:flex;align-items:center;justify-content:center;">
                    <div style="transform:rotate(-90deg);font-weight:700;font-size:1.1rem;color:rgba(0,0,0,.55);letter-spacing:.5px;white-space:nowrap;">In Progress</div>
                </div>
            }
        </div>

        <div style="@($"flex:0 0 {(ColToDoCollapsed ? "64px" : "280px")};width:{(ColToDoCollapsed ? "64px" : "280px")};display:flex;flex-direction:column;border-radius:12px;overflow:hidden;position:relative;background-color:rgba(22,163,74,.15);transition:width .25s ease,flex-basis .25s ease;")">
            @if (!ColToDoCollapsed)
            {
                <div style="display:flex;justify-content:space-between;align-items:center;padding:8px 12px;">
                    <div style="font-weight:600;font-size:1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">To Do</div>
                    <MudIconButton Icon="@Icons.Material.Filled.KeyboardDoubleArrowLeft" OnClick="ToggleToDo" Style="color:var(--mud-palette-text-primary);font-size:22px;" />
                </div>
                <div class="task-scroll" style="flex:1;overflow-y:auto;padding:0 8px 12px;box-sizing:border-box;">
                    @foreach (var t in ToDoTasks)
                    {
                        <MudCard Elevation="1" Style="margin-bottom:8px;transition:transform .2s ease,opacity .2s ease;">
                            <div style="display:flex;justify-content:space-between;align-items:center;padding:8px 12px;">
                                <div style="display:flex;flex-direction:column;min-width:0;">
                                    <MudText Typo="Typo.subtitle2" Style="margin:0;overflow:hidden;text-overflow:ellipsis;">@t.Title</MudText>
                                    <MudText Typo="Typo.caption" Style="margin-top:4px;">@t.Date</MudText>
                                </div>
                            </div>
                        </MudCard>
                    }
                </div>
            }
            else
            {
                <div style="position:absolute;top:6px;right:6px;">
                    <MudIconButton Icon="@Icons.Material.Filled.KeyboardDoubleArrowRight" OnClick="ToggleToDo" Style="color:var(--mud-palette-text-primary);font-size:22px;" />
                </div>
                <div style="flex:1;display:flex;align-items:center;justify-content:center;">
                    <div style="transform:rotate(-90deg);font-weight:700;font-size:1.1rem;color:rgba(0,0,0,.55);letter-spacing:.5px;white-space:nowrap;">To Do</div>
                </div>
            }
        </div>

        <div style="@($"flex:0 0 {(ColDoneCollapsed ? "64px" : "280px")};width:{(ColDoneCollapsed ? "64px" : "280px")};display:flex;flex-direction:column;border-radius:12px;overflow:hidden;position:relative;background-color:var(--mud-palette-action-default);transition:width .25s ease,flex-basis .25s ease;")">
            @if (!ColDoneCollapsed)
            {
                <div style="display:flex;justify-content:space-between;align-items:center;padding:8px 12px;">
                    <div style="font-weight:600;font-size:1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">Done</div>
                    <MudIconButton Icon="@Icons.Material.Filled.KeyboardDoubleArrowLeft" OnClick="ToggleDone" Style="color:var(--mud-palette-text-primary);font-size:22px;" />
                </div>
                <div class="task-scroll" style="flex:1;overflow-y:auto;padding:0 8px 12px;box-sizing:border-box;">
                    @foreach (var t in DoneTasks)
                    {
                        <MudCard Elevation="1" Style="margin-bottom:8px;transition:transform .2s ease,opacity .2s ease;">
                            <div style="display:flex;justify-content:space-between;align-items:center;padding:8px 12px;">
                                <div style="display:flex;flex-direction:column;min-width:0;">
                                    <MudText Typo="Typo.subtitle2" Style="margin:0;overflow:hidden;text-overflow:ellipsis;">@t.Title</MudText>
                                    <MudText Typo="Typo.caption" Style="margin-top:4px;">@t.Date</MudText>
                                </div>
                            </div>
                        </MudCard>
                    }
                </div>
            }
            else
            {
                <div style="position:absolute;top:6px;right:6px;">
                    <MudIconButton Icon="@Icons.Material.Filled.KeyboardDoubleArrowRight" OnClick="ToggleDone" Style="color:var(--mud-palette-text-primary);font-size:22px;" />
                </div>
                <div style="flex:1;display:flex;align-items:center;justify-content:center;">
                    <div style="transform:rotate(-90deg);font-weight:700;font-size:1.1rem;color:rgba(0,0,0,.55);letter-spacing:.5px;white-space:nowrap;">Done</div>
                </div>
            }
        </div>

        <div style="flex:0 0 280px;width:280px;display:flex;align-items:center;justify-content:center;border:2px dashed rgba(0,0,0,.2);border-radius:12px;background:var(--mud-palette-background);">
            <MudIcon Icon="@Icons.Material.Filled.Add" Style="font-size:64px;color:rgba(0,0,0,.3);" />
        </div>
    </div>
</div>

@code {
    private bool ColInProgressCollapsed;
    private bool ColToDoCollapsed;
    private bool ColDoneCollapsed;

    private class TaskItem { public string Title { get; set; } = ""; public string Date { get; set; } = ""; }

    private List<TaskItem> InProgressTasks = new()
    {
        new TaskItem { Title = "Execute Related Text for Post for Issue and Fill in Form, Please.", Date = "2024/03/03" },
        new TaskItem { Title = "Execute Related Text for Post for Issue and Fill in Form, Please.", Date = "2024/03/03" }
    };
    private List<TaskItem> ToDoTasks = new()
    {
        new TaskItem { Title = "Execute Related Text for Post for Issue and Fill in Form, Please.", Date = "2024/03/03" },
        new TaskItem { Title = "Execute Related Text for Post for Issue and Fill in Form, Please.", Date = "2024/03/03" }
    };
    private List<TaskItem> DoneTasks = new()
    {
        new TaskItem { Title = "Execute Related Text for Post for Issue and Fill in Form, Please.", Date = "2024/03/03" },
        new TaskItem { Title = "Execute Related Text for Post for Issue and Fill in Form, Please.", Date = "2024/03/03" }
    };

    private void ToggleInProgress() => ColInProgressCollapsed = !ColInProgressCollapsed;
    private void ToggleToDo() => ColToDoCollapsed = !ColToDoCollapsed;
    private void ToggleDone() => ColDoneCollapsed = !ColDoneCollapsed;
}
